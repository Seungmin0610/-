RMSSD는 짧은 시간 HRV (심박 변동성)를 대표하는 표준 지표입니다. RR 간격의 연속 차이를 기반으로 계산하며, 감정/자율신경계 반응 변화를 잡아내는 데 유용합니다.
BPM → RR (ms) 로 변환한 뒤 RMSSD를 계산한 이유: 대부분 센서/DB에 BPM으로 저장되어 있더라도 HRV는 간격 (RR) 정보에서 자연스럽게 계산됩니다.
변화량 (pctChange): 사용자가 요청한 '변동성의 변화의 정도'를 반영합니다. 초기 기준 (초반 윈도우) 대비 전체/후반의 RMSSD 변화를 백분율로 보고 크면 클수록 점수 (호감/흥분 변화)가 크다고 판단합니다. baselineWindow (현재 10개 샘플)는 센서 샘플링/전송 빈도에 따라 조절하면 됩니다. (예: 3초 간격으로 DB에 저장하면 10개 샘플은 30초 기준입니다.) 해보고 필요하면 5~20 범위로 조절하면 됩니다.
동기성 (sync): 두 사람의 HRV 패턴이 비슷하게 변하면 (예: 둘 다 같은 순간에 설렘으로 RMSSD가 변한다면) 상호 작용이 일어난 것으로 볼 수 있어 보너스 점수를 줍니다. 현재는 0~20점 (최대)로 넣어뒀습니다. 해보고 필요하면 0~10 혹은 0~30으로 조정하면 됩니다.
스케일/가중치: 현재 값들은 임의의 기값입니다. (change * 100, sync * 20) 직접 해보면서 실제 사용자 데이터 및 성능 (감도/특이성)을 확인하고 조절해봐야 합니다.
DB에서 레코드 수가 적을 때 (예: 샘플이 1~2개) RMSSD 계산이 무의미하게 되므로, 그런 경우 0 또는 안전한 기본 점수를 반환하게 되어 있습니다.
